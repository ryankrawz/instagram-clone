(this["webpackJsonpinstagram-clone"]=this["webpackJsonpinstagram-clone"]||[]).push([[0],{11:function(e,t,n){e.exports={bold:"Post_bold__1fmUM",post:"Post_post__hw-08",postHeader:"Post_postHeader__SB-fC",profilePhoto:"Post_profilePhoto__1HOX3",postPhoto:"Post_postPhoto__3ttJA",postItem:"Post_postItem__QGlIx",commentButton:"Post_commentButton__1BJn6",addComment:"Post_addComment__aGSqH",postTimestamp:"Post_postTimestamp__h4H0W"}},14:function(e,t,n){e.exports={bold:"Profile_bold__22CJl",profileHeader:"Profile_profileHeader__2NZ-u",profilePhoto:"Profile_profilePhoto__4saYH",titleAndButton:"Profile_titleAndButton__27U2_",profileTitle:"Profile_profileTitle__o1xr9",buttonContainer:"Profile_buttonContainer__21JPG",button:"Profile_button__sIBMn",followButton:"Profile_followButton__1sqNq",unfollowButton:"Profile_unfollowButton__38faJ",profileBio:"Profile_profileBio__3-fmv",profileStats:"Profile_profileStats__2FQky",profilePosts:"Profile_profilePosts__1uPJ3"}},19:function(e,t,n){e.exports={photo:"NewPost_photo__2GXN3",dropArea:"NewPost_dropArea__1QAEl",dragging:"NewPost_dragging__3GXy5",message:"NewPost_message__3BUtG",image:"NewPost_image__2e7fR",desc:"NewPost_desc__lYGQI",actions:"NewPost_actions__1uqzu",error:"NewPost_error__3yRfa"}},22:function(e,t,n){e.exports={navbar:"Navbar_navbar__31-FB"}},24:function(e,t,n){e.exports={header:"Header_header__3mObx"}},26:function(e,t,n){e.exports={response:"Response_response__e9JgJ",username:"Response_username__Nfhi_"}},27:function(e,t,n){e.exports={square:"PostThumbnail_square__1mMZc",content:"PostThumbnail_content__23flp",image:"PostThumbnail_image__3J_3H"}},28:function(e,t,n){e.exports={stat:"ProfileStat_stat__1IMzP",statNum:"ProfileStat_statNum__iI29Y",statLabel:"ProfileStat_statLabel__3fRa_"}},31:function(e,t,n){e.exports={container:"App_container__6j1zw",content:"App_content__1dlDM"}},47:function(e,t,n){},59:function(e,t,n){"use strict";n.r(t);var s=n(3),a=n.n(s),o=n(37),r=n.n(o),c=(n(47),n(13)),i=n(8),l=n(31),d=n.n(l),u=n(12),j=n(34);n(50);function f(e){var t=(new Date).valueOf().toString(36);return function(e){for(var t=(new Date).getTime(),n=0;n<1e7&&!((new Date).getTime()-t>e);n++);}(1),e+t}var p=n(2);j.a.initializeApp({apiKey:"AIzaSyDxA78Ih4iISd5wJgLBr7D0fV-p5FoiDDg",authDomain:"krawczry-csci2254.firebaseapp.com",projectId:"krawczry-csci2254",storageBucket:"krawczry-csci2254.appspot.com",messagingSenderId:"292846939114",appId:"1:292846939114:web:08162f5d2e394446e62093"});var m=j.a.firestore(),b=Object(s.createContext)();var h=function(e){var t=Object(s.useState)("judy"),n=Object(u.a)(t,2),a=n[0],o=(n[1],Object(s.useState)([])),r=Object(u.a)(o,2),c=r[0],i=r[1],l=Object(s.useState)([]),d=Object(u.a)(l,2),j=d[0],h=d[1],O=Object(s.useState)([]),x=Object(u.a)(O,2),v=x[0],_=x[1],g=Object(s.useState)([]),N=Object(u.a)(g,2),I=N[0],P=N[1],w=Object(s.useState)([]),D=Object(u.a)(w,2),k=D[0],S=D[1];return Object(s.useEffect)((function(){m.collection("users").get().then((function(e){var t=e.docs.map((function(e){return e.data()}));i(t)})),m.collection("posts").get().then((function(e){var t=e.docs.map((function(e){return e.data()}));h(t)})),m.collection("followers").get().then((function(e){var t=e.docs.map((function(e){return e.data()}));P(t)})),m.collection("comments").get().then((function(e){var t=e.docs.map((function(e){return e.data()}));S(t)})),m.collection("likes").get().then((function(e){var t=e.docs.map((function(e){return e.data()}));_(t)}))}),[]),Object(p.jsx)(b.Provider,{value:{currentUserId:a,users:c,posts:j,likes:v,followers:I,comments:k,addComment:function(e,t){var n={userId:a,postId:e,text:t,datetime:(new Date).toISOString()};S(k.concat(n)),m.collection("comments").add(n)},addFollower:function(e){var t={userId:e,followerId:a};P(I.concat(t)),m.collection("followers").add(t)},addPost:function(e,t){if(!e)throw new TypeError("Photo required");var n={id:f("post"),userId:a,photo:e,desc:t,datetime:(new Date).toISOString()};h(j.concat(n)),m.collection("posts").add(n)},addLike:function(e){var t={userId:a,postId:e,datetime:(new Date).toISOString()};_(v.concat(t)),m.collection("likes").add(t)},removeFollower:function(e){P(I.filter((function(t){return!(t.followerId===a&&t.userId===e)}))),m.collection("followers").where("userId","==",e).where("followerId","==",a).get().then((function(e){return e.forEach((function(e){return e.ref.delete()}))}))},removeLike:function(e){_(v.filter((function(t){return!(t.userId===a&&t.postId===e)}))),m.collection("likes").where("userId","==",a).where("postId","==",e).get().then((function(e){return e.forEach((function(e){return e.ref.delete()}))}))}},children:e.children})};var O=function(){return Object(p.jsx)("div",{children:"Activity"})};var x=function(){return Object(p.jsx)("div",{children:"Explore"})},v=n(24),_=n.n(v);function g(e){return e.startsWith("/")?"/instagram-clone"+e:e}var N=function(){return Object(p.jsxs)("header",{className:_.a.header,children:[Object(p.jsx)("div",{className:_.a.headerItem,children:Object(p.jsx)("button",{children:Object(p.jsx)("img",{src:g("/assets/camera.svg"),alt:"Home"})})}),Object(p.jsx)("div",{className:_.a.headerItem,children:Object(p.jsx)("button",{children:Object(p.jsx)("img",{src:g("/assets/logo.png"),alt:"Explore"})})}),Object(p.jsx)("div",{className:_.a.headerItem,children:Object(p.jsx)("button",{children:Object(p.jsx)("img",{src:g("/assets/message.svg"),alt:"Explore"})})})]})};function I(e,t){return t.find((function(t){return t.id===e}))}function P(e,t){return t.filter((function(t){return t.postId===e.id}))}function w(e,t,n){var s=t.filter((function(t){return t.postId===e.id}));return{self:s.some((function(e){return e.userId===n})),count:s.length}}var D=n(11),k=n.n(D);function S(e){var t=Math.floor((new Date-new Date(e))/1e3),n=Math.floor(t/31556926);return n>=1?n+" years":(n=Math.floor(t/2592e3))>=1?n+" months":(n=Math.floor(t/86400))>=1?n+" days":(n=Math.floor(t/3600))>=1?n+" hours":(n=Math.floor(t/60))>=1?n+" minutes":Math.floor(t)+" seconds"}var C=n(26),y=n.n(C);var B=function(e){return Object(p.jsxs)("div",{className:y.a.response,children:[Object(p.jsx)("span",{className:y.a.username,children:e.username}),Object(p.jsx)("span",{className:y.a.text,children:e.text})]})};var L=function(e){var t=Object(s.useState)(""),n=Object(u.a)(t,2),a=n[0],o=n[1],r=Object(s.useState)(!1),i=Object(u.a)(r,2),l=i[0],d=i[1];return Object(p.jsxs)("section",{className:k.a.post,children:[Object(p.jsxs)("div",{className:k.a.postHeader,children:[Object(p.jsx)("img",{className:k.a.profilePhoto,src:g(e.user.photo),alt:e.user.id}),Object(p.jsx)(c.b,{to:"/profile/".concat(e.user.id),children:Object(p.jsx)("span",{className:k.a.bold,children:e.user.id})})]}),Object(p.jsx)("img",{className:k.a.postPhoto,src:g(e.post.photo),alt:e.post.desc}),Object(p.jsxs)("div",{children:[Object(p.jsxs)("div",{children:[e.likes.self?Object(p.jsx)("img",{className:k.a.postItem,src:g("/assets/unlike.svg"),alt:"Unlike",onClick:function(){e.onUnlike(e.post.id)}}):Object(p.jsx)("img",{className:k.a.postItem,src:g("/assets/like.svg"),alt:"Like",onClick:function(){e.onLike(e.post.id)}}),Object(p.jsx)("img",{className:"".concat(k.a.postItem," ").concat(k.a.commentButton),src:g("/assets/comment.svg"),alt:"Comment",onClick:function(e){return d(!l)}})]}),Object(p.jsxs)("span",{className:"".concat(k.a.bold," ").concat(k.a.postItem),children:[e.likes.count," likes"]})]}),Object(p.jsxs)("div",{className:k.a.postItem,children:[Object(p.jsx)(B,{username:e.user.id,text:e.post.desc}),e.comments.map((function(e,t){return Object(p.jsx)(B,{username:e.userId,text:e.text},t)}))]}),Object(p.jsx)("span",{className:"".concat(k.a.postItem," ").concat(k.a.postTimestamp),children:S(e.post.datetime)}),l&&Object(p.jsxs)("form",{className:k.a.addComment,onSubmit:function(t){e.onComment(e.post.id,a),o(""),d(!1),t.preventDefault()},children:[Object(p.jsx)("input",{type:"text",placeholder:"Add a comment\u2026",value:a,onChange:function(e){return o(e.target.value)}}),Object(p.jsx)("button",{type:"submit",children:"Post"})]})]})};var T=function(){var e=Object(s.useContext)(b),t=e.posts,n=e.users,a=e.comments,o=e.likes,r=e.currentUserId,c=e.addComment,l=e.addLike,d=e.removeLike,u=Object(i.g)().postId;return Object(p.jsx)("div",{children:t.filter((function(e){return!u||e.id===u})).sort((function(e,t){return new Date(t.datetime)-new Date(e.datetime)})).map((function(e){return Object(p.jsx)(L,{user:I(e.userId,n),likes:w(e,o,r),post:e,comments:P(e,a),onLike:l,onUnlike:d,onComment:c},e.id)}))})},E=n(22),A=n.n(E);var F=function(){return Object(p.jsxs)("nav",{className:A.a.navbar,children:[Object(p.jsx)("div",{className:A.a.navItem,children:Object(p.jsx)(c.b,{to:"/",children:Object(p.jsx)("img",{src:g("/assets/home.svg"),alt:"Home"})})}),Object(p.jsx)("div",{className:A.a.navItem,children:Object(p.jsx)(c.b,{to:"/explore",children:Object(p.jsx)("img",{src:g("/assets/explore.svg"),alt:"Explore"})})}),Object(p.jsx)("div",{className:A.a.navItem,children:Object(p.jsx)(c.b,{to:"/newpost",children:Object(p.jsx)("img",{src:g("/assets/newpost.svg"),alt:"New Post"})})}),Object(p.jsx)("div",{className:A.a.navItem,children:Object(p.jsx)(c.b,{to:"/activity",children:Object(p.jsx)("img",{src:g("/assets/like.svg"),alt:"Activity"})})}),Object(p.jsx)("div",{className:A.a.navItem,children:Object(p.jsx)(c.b,{to:"/profile",children:Object(p.jsx)("img",{src:g("/assets/profile.svg"),alt:"Profile"})})})]})},H=n(19),M=n.n(H),J=n(39),U=n(40),z=n(21),q=n(42),G=n(41),R=function(e){Object(q.a)(n,e);var t=Object(G.a)(n);function n(e){var s;return Object(J.a)(this,n),(s=t.call(this,e)).handleDragEnter=s.handleDragEnter.bind(Object(z.a)(s)),s.handleDrop=s.handleDrop.bind(Object(z.a)(s)),s.handleDragOver=s.handleDragOver.bind(Object(z.a)(s)),s.handleDragLeave=s.handleDragLeave.bind(Object(z.a)(s)),s}return Object(U.a)(n,[{key:"handleDrop",value:function(e){e.preventDefault(),e.stopPropagation(),this.props.onDrop&&this.props.onDrop(e)}},{key:"handleDragEnter",value:function(e){e.preventDefault(),e.stopPropagation(),this.dragTargetSaved=e.target,this.props.onDragEnter&&this.props.onDragEnter(e)}},{key:"handleDragOver",value:function(e){!1!==e.dataTransfer.types.includes("Files")&&(e.preventDefault(),e.stopPropagation(),this.props.onDragOver&&this.props.onDragOver(e))}},{key:"handleDragLeave",value:function(e){e.preventDefault(),e.stopPropagation(),this.props.onDragLeave&&this.dragTargetSaved===e.target&&this.props.onDragLeave(e)}},{key:"render",value:function(){var e=a.a.Children.only(this.props.children);return a.a.cloneElement(e,{onDragEnter:this.handleDragEnter,onDragOver:this.handleDragOver,onDragLeave:this.handleDragLeave,onDrop:this.handleDrop})}}]),n}(s.PureComponent);var Q=function(){var e=Object(s.useContext)(b).addPost,t=Object(s.useState)(!1),n=Object(u.a)(t,2),a=n[0],o=n[1],r=Object(s.useState)(""),c=Object(u.a)(r,2),l=c[0],d=c[1],j=Object(s.useState)(null),f=Object(u.a)(j,2),m=f[0],h=f[1],O=Object(s.useState)(""),x=Object(u.a)(O,2),v=x[0],_=x[1],g=Object(i.f)();return Object(p.jsxs)("div",{children:[Object(p.jsxs)("div",{className:M.a.photo,children:[m?Object(p.jsx)("img",{src:m,alt:"New Post"}):Object(p.jsx)("div",{className:M.a.message,children:"Drop your image"}),Object(p.jsx)(R,{onDragEnter:function(e){o(!0)},onDragLeave:function(e){o(!1)},onDrop:function(e){if(e.dataTransfer.types.includes("Files")){if(e.dataTransfer.files.length>=1){var t=e.dataTransfer.files[0];if(t.size>1e6)return;if(t.type.match(/image.*/)){var n=new FileReader;n.onloadend=function(e){h(e.target.result)},n.readAsDataURL(t)}}o(!1)}},children:Object(p.jsx)("div",{className:[M.a.dropArea,a?M.a.dragging:null].join(" ")})})]}),Object(p.jsx)("div",{className:M.a.desc,children:Object(p.jsx)("textarea",{value:l,onChange:function(e){return function(e){d(e.target.value)}(e)}})}),Object(p.jsx)("div",{className:M.a.error,children:v}),Object(p.jsxs)("div",{className:M.a.actions,children:[Object(p.jsx)("button",{onClick:function(e){return g.push("/")},children:"Cancel"}),Object(p.jsx)("button",{onClick:function(t){try{e(m,l),_(""),g.push("/")}catch(n){_(n.message)}t.preventDefault()},children:"Share"})]})]})},X=n(14),Y=n.n(X),W=n(27),Z=n.n(W);var K=function(e){return Object(p.jsx)("div",{className:Z.a.square,children:Object(p.jsx)("div",{className:Z.a.content,children:Object(p.jsx)("img",{className:Z.a.image,src:g(e.post.photo),alt:"Post Thumbnail"})})})},V=n(28),$=n.n(V);var ee=function(e){return Object(p.jsxs)("div",{className:$.a.stat,children:[Object(p.jsx)("span",{className:$.a.statNum,children:e.num}),Object(p.jsx)("span",{className:$.a.statLabel,children:e.label})]})};var te=function(){var e=Object(s.useContext)(b),t=e.posts,n=e.users,a=e.followers,o=e.currentUserId,r=e.addFollower,l=e.removeFollower,d=Object(i.g)(),u=d.userId?d.userId:o,j=I(u,n),f=function(e,t,n){var s=t.filter((function(t){return t.userId===e})).map((function(e){return e.followerId}));return n.filter((function(e){return s.includes(e.id)}))}(u,a,n),m=function(e,t,n){var s=t.filter((function(t){return t.followerId===e})).map((function(e){return e.userId}));return n.filter((function(e){return s.includes(e.id)}))}(u,a,n),h=function(e,t){return t.filter((function(t){return t.userId===e}))}(u,t);return Object(p.jsxs)("div",{children:[Object(p.jsxs)("section",{className:Y.a.profileHeader,children:[Object(p.jsx)("img",{className:Y.a.profilePhoto,src:g(j.photo),alt:j.id}),Object(p.jsxs)("div",{className:Y.a.titleAndButton,children:[Object(p.jsx)("span",{className:Y.a.profileTitle,children:j.id}),u!==o&&Object(p.jsx)("div",{className:Y.a.buttonContainer,children:0===a.filter((function(e){return e.followerId===o})).length?Object(p.jsx)("span",{className:"".concat(Y.a.button," ").concat(Y.a.followButton),onClick:function(e){return r(j.id)},children:"Follow"}):Object(p.jsx)("span",{className:"".concat(Y.a.button," ").concat(Y.a.unfollowButton),onClick:function(e){return l(j.id)},children:"Unfollow"})})]})]}),Object(p.jsxs)("section",{className:Y.a.profileBio,children:[Object(p.jsx)("span",{className:Y.a.bold,children:j.name}),Object(p.jsx)("span",{children:j.bio})]}),Object(p.jsx)("hr",{}),Object(p.jsxs)("section",{className:Y.a.profileStats,children:[Object(p.jsx)(ee,{num:h.length,label:"posts"}),Object(p.jsx)(ee,{num:f.length,label:"followers"}),Object(p.jsx)(ee,{num:m.length,label:"following"})]}),Object(p.jsx)("section",{className:Y.a.profilePosts,children:h.map((function(e){return Object(p.jsx)(c.b,{to:"/".concat(e.id),children:Object(p.jsx)(K,{post:e})},e.id)}))})]})};var ne=function(){return Object(p.jsx)(c.a,{basename:"/instagram-clone",children:Object(p.jsx)(h,{children:Object(p.jsxs)("div",{className:d.a.container,children:[Object(p.jsx)(N,{}),Object(p.jsx)("main",{className:d.a.content,children:Object(p.jsxs)(i.c,{children:[Object(p.jsx)(i.a,{path:"/explore",children:Object(p.jsx)(x,{})}),Object(p.jsx)(i.a,{path:"/newpost",children:Object(p.jsx)(Q,{})}),Object(p.jsx)(i.a,{path:"/activity",children:Object(p.jsx)(O,{})}),Object(p.jsx)(i.a,{path:"/profile/:userId?",children:Object(p.jsx)(te,{})}),Object(p.jsx)(i.a,{path:"/:postId?",children:Object(p.jsx)(T,{})})]})}),Object(p.jsx)(F,{})]})})})},se=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,60)).then((function(t){var n=t.getCLS,s=t.getFID,a=t.getFCP,o=t.getLCP,r=t.getTTFB;n(e),s(e),a(e),o(e),r(e)}))};r.a.render(Object(p.jsx)(a.a.StrictMode,{children:Object(p.jsx)(ne,{})}),document.getElementById("root")),se()}},[[59,1,2]]]);
//# sourceMappingURL=main.9e6fc88e.chunk.js.map